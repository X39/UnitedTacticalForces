class Mission
{
	class Entities
	{
		class Item359
		{
			init="private _debug = false;   " \n "private _mineChance = 0.2;   " \n "private _distanceFromSource = 10000;   " \n "private _potentialMines = 100;   " \n "private _excludeAreasMarkers = [""IED_HQ"", ""IED_TOWN"", ""IED_AO1"", ""IED_AO2""];   " \n "private _removeMarkersAfterCreation = true;   " \n "private _classNameMines = [""IEDUrbanSmall_F"", ""IEDUrbanBig_F"", ""IEDLandSmall_F"", ""IEDLandBig_F""];   " \n "private _classNameDecoys = [""Land_Misc_Garb_Heap_EP1"", ""Land_GarbageWashingMachine_F"", ""Land_GarbagePallet_F"", ""Land_GarbageHeap_01_F"", ""Land_GarbageHeap_03_F"", ""Land_GarbageHeap_02_F""];   " \n "  " \n "if !isServer exitWith { " \n "    if _removeMarkersAfterCreation then {  " \n "        { deleteMarkerLocal _x } forEach _excludeAreasMarkers;  " \n "    }; " \n "};  " \n "private _sourcePos = position this;  " \n "private _roads = _sourcePos nearRoads _distanceFromSource;  " \n "private _spots = 0;  " \n "for ""_i"" from 0 to _potentialMines do {  " \n "    _spots = _spots + 1;  " \n "    private _randomDecoy = _classNameDecoys select floor random count _classNameDecoys;  " \n "    private _randomRoad = _roads select floor random count _roads;  " \n "    if isNil ""_randomRoad"" exitWith { };  " \n "    _roads deleteAt (_roads find _randomRoad);  " \n "    private _roadInfo = getRoadInfo _randomRoad;  " \n "    private _posA = _roadInfo select 6;  " \n "    private _posB = _roadInfo select 7;  " \n "    private _roadWidth = _roadInfo select 1;  " \n "    private _roadWidthHalf = _roadWidth / 2;  " \n "    private _distance = _posA distance _posB;  " \n "    private _vec = _posA vectorFromTo _posB;  " \n "    private _vecUp = [0, 0, 1] vectorCrossProduct _vec;  " \n "    private _vecUpLengthened = _vecUp vectorMultiply (random _roadWidthHalf + _roadWidthHalf);  " \n "    private _vecUpRandomized = _vecUpLengthened vectorMultiply ([1, -1] select (random 1 > 0.5));  " \n "    private _randomDistance = random _distance;  " \n "    private _vecLengthened = (_vec vectorMultiply _randomDistance);  " \n "    private _spawnPosition = _vecUpRandomized vectorAdd _vecLengthened vectorAdd _posA;  " \n "    _spawnPosition set [2, 0];  " \n "    if (_excludeAreasMarkers findIf { _spawnPosition inArea _x } >= 0) then {  " \n "        if _debug then {  " \n "            private _marker = str _spawnPosition;  " \n "            createMarker [_marker, _spawnPosition];  " \n "            _marker setMarkerType ""hd_dot"";  " \n "            _marker setMarkerText str _spots;  " \n "            str _spawnPosition setMarkerColor ""ColorGreen"";  " \n "        };  " \n "        _i = _i - 1;  " \n "    }  " \n "    else  " \n "    {    " \n "      " \n "        if _debug then {  " \n "            private _marker = str _spawnPosition;  " \n "            createMarker [_marker, _spawnPosition];  " \n "            _marker setMarkerType ""hd_dot"";  " \n "            _marker setMarkerText str _spots;  " \n "        };  " \n "        private _trigger = nil;  " \n "        if (random 1 <= _mineChance) then {  " \n "            private _randomMine = _classNameMines select floor random count _classNameMines;  " \n "            private _mine = createMine [_randomMine, _spawnPosition, [], 0];  " \n "            _trigger = createTrigger [""EmptyDetector"", _spawnPosition];  " \n "            _trigger setVariable [""X39_Mine"", _mine];  " \n "            _trigger setTriggerArea [_roadWidth, _roadWidth, 0, false, _roadWidth];  " \n "            _trigger setTriggerActivation [""ANY"", ""PRESENT"", true];  " \n "            _trigger setTriggerStatements ['thisList findIf { units _x # 0 != _x } != -1', 'deleteVehicle (thisTrigger getVariable ""X39_Decoy""); thisTrigger getVariable ""X39_Mine"" setDammage 1; deleteVehicle thisTrigger;', """"];  " \n "            _trigger setTriggerTimeout [0, 0.5, 1, true];  " \n "            if _debug then {  " \n "                str _spawnPosition setMarkerColor ""ColorRed"";  " \n "            };  " \n "        };  " \n "        private _decoy = createVehicle [_randomDecoy, _spawnPosition, [], 0, ""CAN_COLLIDE""];  " \n "        if !isNil ""_trigger"" then {  " \n "            _trigger setVariable [""X39_Decoy"", _decoy];  " \n "        };  " \n "        [_decoy, [""Entfernen"", { deleteVehicle (_this select 0) }, nil, 1.5, false, true, """", ""_this getUnitTrait 'explosiveSpecialist'"", 5, false]] remoteExec [""addAction"", 0, true];  " \n "    };  " \n "};  " \n "if _removeMarkersAfterCreation then {  " \n "    { deleteMarker _x } forEach _excludeAreasMarkers;  " \n "};";
		};
	};
};
